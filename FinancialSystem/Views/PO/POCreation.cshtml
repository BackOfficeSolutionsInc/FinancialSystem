@using FinancialSystem.Models
@using FinancialSystem.Utilities;
@using FinancialSystem.Models.Enums;
@model IList<PRLinesModel>

@{ 
	var pr = (PRHeaderModel)ViewData["PR"];
	var smallLogo = Config.GetCompanyLogo(pr.Requestor.Company.SmallLogo);
	var supplier = Model[0].Supplier;
	double totalAmount = 0;
}
<div class="col s12 content">

	<div class="container">
		<div class="col s12 pr-form" id="pr1">
			<div class="row">
				<div class="col s6"><img src="@smallLogo" alt="" class="src"></div>
				<div class="col s6" id="pr-title">PURCHASE ORDER</div>
				<div class="col s6" id="address">
					@pr.Requestor.Company.Address <br/>
					<b>TIN: @pr.Requestor.Company.Tin</b>
				</div>
				<div class="col s6" id="pr-number">
					Requisition Number: <b><span id="pr-num"></span></b><br>
					Date Prepared: @DateTime.Now<br>
					Date Required: <input type="text" class="datepicker" id="datepicker"><br>
					@*Date Approve:*@
				</div>
				<div id="info0">
					<div class="col s6" id="info"><b>Company:</b> @pr.Requestor.Company.CompanyName</div>
					<div class="col s6" id="info">
						<b>Requestor Name: </b> @pr.Requestor.Name()
					</div>
					<!-- Modal Structure -->
					@*<div id="modal1" class="modal">
						<div class="modal-content">
							<h4>Search Requestor</h4>
							<form autocomplete="off" action="">
								<div class="autocomplete">
									<input id="myInput" type="text" name="requestor"
										   placeholder="Search Requestor">
								</div>
							</form>
						</div>
						<div class="modal-footer">
							<a href="#!" class="modal-close waves-effect waves-green btn-flat">OK</a>
						</div>
					</div>*@
					<!-- End Modal -->
					<div class="col s6" id="info"><b>Supplier : </b> @supplier.Name</div>
					<div class="col s6" id="info"><b>Cost Revenue Center (CRC): </b>  @pr.CRC.CRCCode</div>
					<div class="col s6" id="info"><b>Delivery Address:</b></div>
					<div class="col s6" id="info"><b>Category Account Code:</b> Account Code</div>
					<div class="col s6" id="info">
						Unit 1103, 11F Pearl of the Orient Tower,
						1240 Roxas Blvd. Brgy. 667 Zone 072,
						Ermita Manila 1000 <a class="badge red modal-trigger" id="badge"
							href="#deladd"><span>-</span></a>
					</div>
					<!-- Modal Structure -->
					<div id="deladd" class="modal">
						<div class="modal-content">
							<h4>Delivery Address</h4>
							<form autocomplete="off" action="">
								<div class="autocomplete">
									<textarea id="deliveryaddress" type="textarea"
											  name="deliveryaddress"
											  placeholder="Delivery Address"></textarea>
								</div>
							</form>
						</div>
						<div class="modal-footer">
							<a href="#!" class="modal-close waves-effect waves-green btn-flat">OK</a>
						</div>
					</div>
					<!-- End Modal -->
					<div class="input-field col s6">
						<input list="PaymentTerms_" onchange="dataList('', '#PaymentTerms', false)" name="PaymentTerms" placeholder="Payment Terms" id="PaymentTermsInput_" />
						<datalist id="PaymentTerms_">
							@{			var PaymentTerms = Enum.GetValues(typeof(PaymentTermsType));
							}
							@foreach (var PaymentTerm in PaymentTerms) {
								<option data-value="@PaymentTerm.ToString()">@PaymentTerm.ToString()</option>
							}
						</datalist>
						<input type="hidden" id="PaymentTermsInput-hidden_" />
					</div>
					<div class="col s6" id="info"></div>
					<div class="col s12">
						<table class="highlight">
							<thead style="background-color: #16A2AF;">
								<tr>
									
									<th>NAME</th>
									<th>DESCRIPTION</th>
									<th>UOM</th>
									<th>QTY</th>
									<th>PRICE</th>
									<th>TOTAL AMOUNT</th>
									<th>ACTIONS</th>
								</tr>
							</thead>

							<tbody>
							@foreach (var line in Model) {
								if (line.Supplier != supplier) {
									continue;
								}
								totalAmount += line.TotalAmount;
								string name = "";
								if (line.Item != null) {
									name = line.Item.Name;
								} else {
									name = line.NonCatalog.Name;
								}
								<tr>
									<td>@name</td>
									<td>
										@line.Description<a class="badge red modal-trigger" id="badge"
									href="#description"><span>-</span></a>
									</td>
									
									<td>
										@line.UOM <a class="badge red modal-trigger" id="badge"
									   href="#uom"><span>-</span></a>
									</td>
									
									<td>
										@line.Quantity <a class="badge red modal-trigger" id="badge"
								   href="#qty"><span>-</span></a>
									</td>
									
									<td>
										@line.UnitPrice <a class="badge red modal-trigger" id="badge"
										  href="#qty"><span>-</span></a>
									</td>
									
									<td>@(line.TotalAmount)</td>
									<td>
										<a class='waves-effect waves-light btn red' onclick='DeleteRow(this)'>Delete</a>
									</td>
								</tr>
							}
							</tbody>
						</table>
					</div>
					<div class="col s6" id="nf">********** nothing follows **********</div>
					<div class="col s3" id="totalAmoumt">
						<b>
							TOTAL AMOUNT
						</b>
					</div>
					<div class="col s3">
						<hr class="line">
						<p id="vat">
							<b>
								Php @(totalAmount * .12) </b><br>
						</p>
						<hr class="line">
						<p id="totalvat"><b>Php @((totalAmount*.12)+totalAmount)</b></p>
					</div>
					<div class="col s12" id="note">
						<p id="noteto"><b>Note to Buyer: </b></p>
						<a class="badge red modal-trigger" id="badge" href="#modal3">
							<span>
								add +
							</span>
						</a></p>
					</div>
					<!-- Modal Structure -->
					<div id="modal3" class="modal">
						<div class="modal-content">
							<h4>Note to buyer</h4>
							<form autocomplete="off" action="">
								<div class="noteTobuyer">
									<textarea id="notoTobuyer" type="textarea" name="notoTobuyer"
											  placeholder="">@pr.NoteToBuyer</textarea>
								</div>
							</form>
						</div>
						<div class="modal-footer">
							<a href="#!" class="modal-close waves-effect waves-green btn-flat">CANCEL</a>
							<a href="#!" class="modal-close waves-effect waves-green btn-flat">OK</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col s12" id="submit">
		<a class="waves-effect waves-light btn right amber modal-trigger" href="#modal4"
		   id="submit-button">CANCEL</a>
		<!-- Modal Structure -->
		<div id="modal4" class="modal">
			<div class="modal-content">
				<p>Are you sure you want to cancel this request?</p>
			</div>
			<div class="modal-footer">
				<a href="#!" class="modal-close waves-effect waves-green btn-flat">Yes</a>
				<a href="#!" class="modal-close waves-effect waves-green btn-flat">No</a>
			</div>
		</div>
		<a class="waves-effect waves-light btn right green modal-trigger" href="#modal5">SUBMIT</a>
		<!-- Modal Structure -->
		<div id="modal5" class="modal">
			<div class="modal-content">
				<p>Are you sure you want to submit this request?</p>
			</div>
			<div class="modal-footer">
				<a href="#!" class="modal-close waves-effect waves-green btn-flat">Yes</a>
				<a href="#!" class="modal-close waves-effect waves-green btn-flat">No</a>
			</div>
		</div>
		<a class="waves-effect waves-light btn right cyan accent-4 modal-trigger left-btn"
		   href="#save">SAVE</a>
		<!-- Modal Structure -->
		<div id="save" class="modal">
			<div class="modal-content">
				<p>Are you sure you want to save this request?</p>
			</div>
			<div class="modal-footer">
				<a href="#!" class="modal-close waves-effect waves-green btn-flat">Yes</a>
				<a href="#!" class="modal-close waves-effect waves-green btn-flat">No</a>
			</div>
		</div>
		<!--Modal Description-->
		<div id="description" class="modal">
			<div class="modal-content">
				<h4>Description</h4>
				<form autocomplete="off" action="">
					<div class="autocomplete">
						<textarea id="description" type="textarea"
								  name="description"
								  placeholder="Description"></textarea>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<a href="#!"
				   class="modal-close waves-effect waves-green btn-flat">CANCEL</a>
				<a href="#!"
				   class="modal-close waves-effect waves-green btn-flat">OK</a>
			</div>
		</div>
		<!--Modal oum-->
		<div id="uom" class="modal">
			<div class="modal-content">
				<h4>Unit of Measurement</h4>
				<form autocomplete="off" action="">
					<div class="autocomplete">
						<textarea id="uom" type="textarea" name="uom"
								  placeholder="UOM"></textarea>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<a href="#!"
				   class="modal-close waves-effect waves-green btn-flat">CANCEL</a>
				<a href="#!"
				   class="modal-close waves-effect waves-green btn-flat">OK</a>
			</div>
		</div>
		<!--Modal Quantity-->
		<div id="qty" class="modal">
			<div class="modal-content">
				<h4>Quantity</h4>
				<form autocomplete="off" action="">
					<div class="autocomplete">
						<textarea id="qty" type="textarea" name="qty"
								  placeholder="Quantity"></textarea>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<a href="#!"
				   class="modal-close waves-effect waves-green btn-flat">CANCEL</a>
				<a href="#!"
				   class="modal-close waves-effect waves-green btn-flat">OK</a>
			</div>
		</div>
		<!--Modal Price-->
		<div id="qty" class="modal">
			<div class="modal-content">
				<h4>Quantity</h4>
				<form autocomplete="off" action="">
					<div class="autocomplete">
						<textarea id="qty" type="textarea" name="qty"
								  placeholder="Quantity"></textarea>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<a href="#!"
				   class="modal-close waves-effect waves-green btn-flat">CANCEL</a>
				<a href="#!"
				   class="modal-close waves-effect waves-green btn-flat">OK</a>
			</div>
		</div>
	</div>

</div>